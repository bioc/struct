<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>StRUCT Model Template</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#header {
text-align: center;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; }  code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">StRUCT Model Template</h1>



<p><span style="color:red">Please note: this vignette describes the contents of a class object broken down in to section. As such some of the lines cannot be run on their own. Please skip to the <span style="color:black"><strong>Complete object</strong> </span> section for a working example. </span></p>
<div id="using-the-template" class="section level1">
<h1>Using the template</h1>
<p>If you want to output the full model template to an editable R script you can use the <code>struct_template</code> function. The <code>type</code> parameter specifies the template to access (in this case “model”) and the file to save the template to. If no path is specified the file will be created in your working directory.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">struct_template</span>(<span class="dt">template=</span><span class="st">&#39;model&#39;</span>,<span class="dt">output=</span><span class="st">&#39;example.R&#39;</span>)</a></code></pre></div>
<p>You can browse all the templates, available as vignettes in the StRUCT package using the <code>browseVignettes</code> function. Viewing the HTML will show this page, and viewing the R code will display a working template.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">browseVignettes</span>(<span class="st">&#39;struct&#39;</span>)</a></code></pre></div>
<p><strong><em>After editing the template</em></strong> you can source the script to use your new model. You can add the script to your own package, or submit it to us for inclusion in the <code>structtoolbox</code> package.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1"><span class="co">## example use</span></a>
<a class="sourceLine" id="cb3-2" title="2"><span class="co"># create an instance of your object</span></a>
<a class="sourceLine" id="cb3-3" title="3">M =<span class="st"> </span><span class="kw">model_template</span>()</a>
<a class="sourceLine" id="cb3-4" title="4"><span class="co"># get/set parameters</span></a>
<a class="sourceLine" id="cb3-5" title="5">M<span class="op">$</span>value_<span class="dv">1</span> =<span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb3-6" title="6">M<span class="op">$</span>value_<span class="dv">1</span> <span class="co"># 5</span></a>
<a class="sourceLine" id="cb3-7" title="7"><span class="co"># train your model with some data</span></a>
<a class="sourceLine" id="cb3-8" title="8">M =<span class="st"> </span><span class="kw">model.train</span>(M,<span class="kw">iris_dataset</span>())</a>
<a class="sourceLine" id="cb3-9" title="9"><span class="co"># apply your model to some test data</span></a>
<a class="sourceLine" id="cb3-10" title="10">M =<span class="st"> </span><span class="kw">model.predict</span>(M,<span class="kw">iris_dataset</span>())</a></code></pre></div>
<p>You might find it useful to create some chart objects for your new model object. See the <code>chart</code> template for help to do this.</p>
<hr />
</div>
<div id="walkthrough" class="section level1">
<h1>Walkthrough</h1>
<div id="class-definition" class="section level2">
<h2>Class definition</h2>
<p>The model templates are based on inheriting the <code>model</code> or <code>model.stato</code> classes from the StRUCT package. This means all the functionality already created as part of struct will be available to the new class.</p>
<p>First, a new class object is set up using the <code>setClass</code> function. The <code>setClass</code> function contains a number of inputs, which will be illustrated in the following steps.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">model_template=<span class="kw">setClass</span>(<span class="st">&#39;model_template&#39;</span>, <span class="co"># replace model_template (both places) </span></a>
<a class="sourceLine" id="cb4-2" title="2">                                          <span class="co"># with your new model name</span></a>
<a class="sourceLine" id="cb4-3" title="3">    <span class="dt">contains =</span> <span class="kw">c</span>(<span class="st">&#39;model&#39;</span>,<span class="st">&#39;stato&#39;</span>),        <span class="co"># &#39;stato&#39; is optional</span></a></code></pre></div>
<p>The <code>contains</code> option tells R which aspects of <code>struct</code> to include in the new model.</p>
<hr />
<div id="slots-for-parameters-and-outputs" class="section level3">
<h3>Slots for parameters and outputs</h3>
<p>After defining the name of your new class and specifying that it contains the <code>model</code> and (optionally) the <code>stato</code> class, the <em>slots</em> are defined. Slots are variables that are associated with the object that are intended to be accessable by the user. It is here that you specify the input parameters and outputs for your class. Input parameters should have <code>params.</code> appended and outputs should have <code>outputs.</code> appended.</p>
<p>Default slots like <code>name</code>, <code>description</code> and <code>type</code> are inherited (i.e. provided by <code>struct</code>) and do not need to be specified.</p>
<p>A type should be indicated for each slot e.g. <code>numeric</code>. Some special types are available in <code>struct</code>, namely <code>entity</code> and <code>enum</code>, and we recommend you use these where possible because they allow you to provide additonal information (<code>name</code>, <code>description</code> etc) about the parameters/outputs.</p>
<p>To use <code>entity</code> objects for parameters and/or outputs, specify <code>entity</code> as the type. If you want to enable STATO functionality for your parameters then you can specify <code>entity.stato</code> as the type.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">    slots=<span class="kw">c</span>(</a>
<a class="sourceLine" id="cb5-2" title="2">        <span class="st">&#39;params.value_0&#39;</span>=<span class="st">&#39;entity&#39;</span>,</a>
<a class="sourceLine" id="cb5-3" title="3">        <span class="st">&#39;params.value_1&#39;</span>=<span class="st">&#39;entity.stato&#39;</span>,</a>
<a class="sourceLine" id="cb5-4" title="4">        <span class="st">&#39;params.value_2&#39;</span>=<span class="st">&#39;numeric&#39;</span>,</a>
<a class="sourceLine" id="cb5-5" title="5">        <span class="st">&#39;outputs.result_1&#39;</span>=<span class="st">&#39;entity&#39;</span>,</a>
<a class="sourceLine" id="cb5-6" title="6">        <span class="st">&#39;outputs.result_2&#39;</span>=<span class="st">&#39;numeric&#39;</span></a>
<a class="sourceLine" id="cb5-7" title="7">    ),</a></code></pre></div>
<hr />
</div>
<div id="prototypes" class="section level3">
<h3>Prototypes</h3>
<div id="model-protoype" class="section level4">
<h4>Model protoype</h4>
<p>You can also optionally include a list of prototypes. Protoypes are used to define default values for parameters. It is recommended that the <code>name</code>, <code>description</code> and <code>type</code> are defined here for your model.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">    prototype =<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb6-2" title="2">        <span class="co">## These are the default slots available for every struct object</span></a>
<a class="sourceLine" id="cb6-3" title="3">        <span class="dt">name=</span><span class="st">&#39;A test model&#39;</span>,</a>
<a class="sourceLine" id="cb6-4" title="4">        <span class="dt">description=</span><span class="st">&#39;An example model object. Training adds value_1 counts to</span></a>
<a class="sourceLine" id="cb6-5" title="5"><span class="st">        a dataset, while prediction adds value_2 counts.&#39;</span>,</a>
<a class="sourceLine" id="cb6-6" title="6">        <span class="dt">type=</span><span class="st">&#39;test&#39;</span>,</a></code></pre></div>
<p>STATO objects can also have a <code>stato.id</code> assigned in the protoype list. It must be assigned when the class is defined, as no mechanism is provided for changing it by the user (other than using @ which is discouraged).</p>
<p>STATO names and definitions can then be extracted from the STATO database based on the supplied id. To search for a relevant ID see <a href="http://stato-ontology.org/" class="uri">http://stato-ontology.org/</a></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">        <span class="co">## This is slot is only required for stato objects</span></a>
<a class="sourceLine" id="cb7-2" title="2">        stato.id=<span class="st">&#39;OBI:0000011&#39;</span>,</a></code></pre></div>
<hr />
</div>
<div id="parameter-and-output-protoypes" class="section level4">
<h4>Parameter and Output protoypes</h4>
<p>Setting an input parameter to an <code>entity</code> object allows default slots for this parameter so that you can be more descriptive about what it does without using lengthy slot names. The <code>type</code> slot allows you to specify that the entity should be of a specific type e.g. ‘numeric’. Note that any slot without a prototype will be initialised as NULL or a vector or zero length of the appropriate class e.g <code>numeric(0)</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" title="1">        <span class="co">## parameters all start with params.</span></a>
<a class="sourceLine" id="cb8-2" title="2">        <span class="co"># entities can be initialised with populated slots</span></a>
<a class="sourceLine" id="cb8-3" title="3">        params.value_<span class="dv">0</span>=<span class="kw">entity</span>(<span class="dt">name=</span><span class="st">&#39;Value 0&#39;</span>,<span class="dt">value=</span><span class="dv">0</span>,<span class="dt">type=</span><span class="st">&#39;numeric&#39;</span>),</a></code></pre></div>
<hr />
<p>A stato.id can be set for <code>entity.stato</code> objects enabling STATO integration for parameters and outputs as well as model objects. It is a good idea to set <code>name</code>, <code>description</code> and <code>stato.id</code> slots here, when the object is defined.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">        <span class="co"># entity.stato objects can have a stato.id</span></a>
<a class="sourceLine" id="cb9-2" title="2">        params.value_<span class="dv">1</span>=<span class="kw">entity.stato</span>(<span class="dt">value=</span><span class="dv">10</span>,<span class="dt">name=</span><span class="st">&#39;Value 1&#39;</span>,<span class="dt">type=</span><span class="st">&#39;numeric&#39;</span>,</a>
<a class="sourceLine" id="cb9-3" title="3">            <span class="dt">description=</span><span class="st">&#39;An example entity.stato object&#39;</span>,</a>
<a class="sourceLine" id="cb9-4" title="4">            <span class="dt">stato.id=</span><span class="st">&#39;STATO:0000047&#39;</span>),</a></code></pre></div>
<hr />
<p>Parameters dont have to be entities, but this is not recommended as there is no mechanism for providing long names and descriptions for these parameters.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">        params.value_<span class="dv">2</span> =<span class="st"> </span><span class="dv">20</span>,</a></code></pre></div>
<hr />
<p>Outputs can be included in the prototype, and we recommend <code>entity</code> or <code>entity.stato</code> objects for these too:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" title="1">        </a>
<a class="sourceLine" id="cb11-2" title="2">        outputs.result_<span class="dv">1</span>=<span class="kw">entity</span>(<span class="dt">name=</span><span class="st">&#39;Result 1&#39;</span>,<span class="dt">type=</span><span class="st">&#39;dataset&#39;</span>,</a>
<a class="sourceLine" id="cb11-3" title="3">            <span class="dt">description=</span><span class="st">&#39;An example entity object&#39;</span>),</a>
<a class="sourceLine" id="cb11-4" title="4"></a>
<a class="sourceLine" id="cb11-5" title="5">        outputs.result_<span class="dv">2</span>=<span class="dv">2</span> <span class="co"># dont have to be entity</span></a>
<a class="sourceLine" id="cb11-6" title="6">    <span class="er">)</span></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="er">)</span></a></code></pre></div>
<hr />
</div>
</div>
</div>
<div id="defining-new-methods-for-your-model-object" class="section level2">
<h2>Defining new methods for your model object</h2>
<p>Model objects have a <code>model.train</code> and a <code>model.predict</code> function predefined by <code>struct</code>, but by default it prints a warning that the method hasnt been implemented yet. You can override the default using the <code>setMethod</code> function. There are a number of inputs for <code>setMethod</code> as described in the following steps.</p>
<p>The <code>signature</code> option should include your new class as the first element, as this will direct R to use the correct <code>model.train</code> or <code>model.predict</code> function for your new model object.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">setMethod</span>(<span class="dt">f=</span><span class="st">&#39;model.train&#39;</span>,                   <span class="co"># dont change this line</span></a>
<a class="sourceLine" id="cb12-2" title="2">    <span class="dt">signature=</span><span class="kw">c</span>(<span class="st">&#39;model_template&#39;</span>,<span class="st">&#39;dataset&#39;</span>), <span class="co"># replace model_template with... </span></a>
<a class="sourceLine" id="cb12-3" title="3">                                             <span class="co"># ...your new model name</span></a></code></pre></div>
<hr />
<p>The description function is where you can include your own R code to train your model. Make sure you <code>return(M)</code> otherwise you model will not behave in the way expected by other StRUCT objects.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1">    definition =<span class="st"> </span><span class="cf">function</span>(M,D) {         <span class="co"># dont change this line</span></a>
<a class="sourceLine" id="cb13-2" title="2">        <span class="co"># do something here #</span></a>
<a class="sourceLine" id="cb13-3" title="3">        <span class="kw">return</span>(M)                        <span class="co"># make sure you return the model object</span></a>
<a class="sourceLine" id="cb13-4" title="4">    }</a>
<a class="sourceLine" id="cb13-5" title="5"><span class="er">)</span></a></code></pre></div>
<p>In the definition M is the model object, so that you can access parameter values and D is the input dataset object, containing the data to train the model with.</p>
<hr />
<p>Similarly, a <code>model.predict</code> method is provided so that you can apply your (trained) model to test data.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">setMethod</span>(<span class="dt">f=</span><span class="st">&#39;model.predict&#39;</span>,                 <span class="co"># dont change this line</span></a>
<a class="sourceLine" id="cb14-2" title="2">    <span class="dt">signature=</span><span class="kw">c</span>(<span class="st">&#39;model_template&#39;</span>,<span class="st">&#39;dataset&#39;</span>), <span class="co"># replace model_template with... </span></a>
<a class="sourceLine" id="cb14-3" title="3">                                             <span class="co"># ...your new model name</span></a>
<a class="sourceLine" id="cb14-4" title="4">    <span class="dt">definition =</span> <span class="cf">function</span>(M,D) {             <span class="co"># dont change this line</span></a>
<a class="sourceLine" id="cb14-5" title="5">        <span class="co">## do something here ##</span></a>
<a class="sourceLine" id="cb14-6" title="6">        <span class="co"># M is the model object</span></a>
<a class="sourceLine" id="cb14-7" title="7">        <span class="kw">return</span>(M)                            <span class="co"># make sure you return the model </span></a>
<a class="sourceLine" id="cb14-8" title="8">    }</a>
<a class="sourceLine" id="cb14-9" title="9">)</a></code></pre></div>
<hr />
</div>
</div>
<div id="complete-object" class="section level1">
<h1>Complete object</h1>
<p>The final model object will look something like this working example:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1">model_template=<span class="kw">setClass</span>(<span class="st">&#39;model_template&#39;</span>, <span class="co"># replace model_template with ...</span></a>
<a class="sourceLine" id="cb15-2" title="2">                                          <span class="co"># ...your new model name</span></a>
<a class="sourceLine" id="cb15-3" title="3">    <span class="dt">contains =</span> <span class="kw">c</span>(<span class="st">&#39;model&#39;</span>,<span class="st">&#39;stato&#39;</span>),       <span class="co"># stato is optional</span></a>
<a class="sourceLine" id="cb15-4" title="4">    <span class="dt">slots=</span><span class="kw">c</span>(                      <span class="co"># define your parameters and outputs here</span></a>
<a class="sourceLine" id="cb15-5" title="5">        <span class="st">&#39;params.value_0&#39;</span>=<span class="st">&#39;entity&#39;</span>,</a>
<a class="sourceLine" id="cb15-6" title="6">        <span class="st">&#39;params.value_1&#39;</span>=<span class="st">&#39;entity.stato&#39;</span>,</a>
<a class="sourceLine" id="cb15-7" title="7">        <span class="st">&#39;params.value_2&#39;</span>=<span class="st">&#39;numeric&#39;</span>,</a>
<a class="sourceLine" id="cb15-8" title="8">        <span class="st">&#39;outputs.result_1&#39;</span>=<span class="st">&#39;entity&#39;</span>,</a>
<a class="sourceLine" id="cb15-9" title="9">        <span class="st">&#39;outputs.result_2&#39;</span>=<span class="st">&#39;numeric&#39;</span></a>
<a class="sourceLine" id="cb15-10" title="10">    ),</a>
<a class="sourceLine" id="cb15-11" title="11">    <span class="dt">prototype =</span> <span class="kw">list</span>( <span class="co"># specify default values for your parameters etc</span></a>
<a class="sourceLine" id="cb15-12" title="12">        </a>
<a class="sourceLine" id="cb15-13" title="13">        <span class="co">## These are the default slots available for every struct object</span></a>
<a class="sourceLine" id="cb15-14" title="14">        <span class="dt">name=</span><span class="st">&#39;A test model&#39;</span>,</a>
<a class="sourceLine" id="cb15-15" title="15">        <span class="dt">description=</span><span class="st">&#39;An example model object. Training adds value_1 counts to</span></a>
<a class="sourceLine" id="cb15-16" title="16"><span class="st">        a dataset, while prediction adds value_2 counts.&#39;</span>,</a>
<a class="sourceLine" id="cb15-17" title="17">        <span class="dt">type=</span><span class="st">&#39;test&#39;</span>,</a>
<a class="sourceLine" id="cb15-18" title="18">        </a>
<a class="sourceLine" id="cb15-19" title="19">        <span class="co">## This slot is only required for model.stato objects</span></a>
<a class="sourceLine" id="cb15-20" title="20">        <span class="dt">stato.id=</span><span class="st">&#39;OBI:0000011&#39;</span>,</a>
<a class="sourceLine" id="cb15-21" title="21">        </a>
<a class="sourceLine" id="cb15-22" title="22">        <span class="co">## parameters all start with params.</span></a>
<a class="sourceLine" id="cb15-23" title="23">        <span class="co"># entities can be initialised with populated slots</span></a>
<a class="sourceLine" id="cb15-24" title="24">        <span class="dt">params.value_0=</span><span class="kw">entity</span>(<span class="dt">name=</span><span class="st">&#39;Value 0&#39;</span>,<span class="dt">value=</span><span class="dv">0</span>,<span class="dt">type=</span><span class="st">&#39;numeric&#39;</span>),</a>
<a class="sourceLine" id="cb15-25" title="25">        </a>
<a class="sourceLine" id="cb15-26" title="26">        <span class="co"># entity.stato objects can have a stato.id</span></a>
<a class="sourceLine" id="cb15-27" title="27">        <span class="dt">params.value_1=</span><span class="kw">entity.stato</span>(<span class="dt">value=</span><span class="dv">10</span>,<span class="dt">name=</span><span class="st">&#39;Value 1&#39;</span>,<span class="dt">type=</span><span class="st">&#39;numeric&#39;</span>,</a>
<a class="sourceLine" id="cb15-28" title="28">            <span class="dt">description=</span><span class="st">&#39;An example entity.stato object&#39;</span>,</a>
<a class="sourceLine" id="cb15-29" title="29">            <span class="dt">stato.id=</span><span class="st">&#39;STATO:0000047&#39;</span>),</a>
<a class="sourceLine" id="cb15-30" title="30">        </a>
<a class="sourceLine" id="cb15-31" title="31">        <span class="co"># params dont have to be entity objects but we dont recommend this.</span></a>
<a class="sourceLine" id="cb15-32" title="32">        <span class="dt">params.value_2=</span><span class="dv">20</span>,</a>
<a class="sourceLine" id="cb15-33" title="33">        </a>
<a class="sourceLine" id="cb15-34" title="34">        <span class="co"># entities can be initialised with populated slots</span></a>
<a class="sourceLine" id="cb15-35" title="35">        <span class="dt">outputs.result_1=</span><span class="kw">entity</span>(<span class="dt">name=</span><span class="st">&#39;Result 1&#39;</span>,<span class="dt">type=</span><span class="st">&#39;dataset&#39;</span>,</a>
<a class="sourceLine" id="cb15-36" title="36">            <span class="dt">description=</span><span class="st">&#39;An example entity object&#39;</span>,<span class="dt">value=</span><span class="kw">dataset</span>()),</a>
<a class="sourceLine" id="cb15-37" title="37">        </a>
<a class="sourceLine" id="cb15-38" title="38">        <span class="co"># outputs dont have to be entity objects but we dont recommend this.</span></a>
<a class="sourceLine" id="cb15-39" title="39">        <span class="dt">outputs.result_2=</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb15-40" title="40">    )</a>
<a class="sourceLine" id="cb15-41" title="41">)</a>
<a class="sourceLine" id="cb15-42" title="42"></a>
<a class="sourceLine" id="cb15-43" title="43"><span class="co"># create a model.train method for your object</span></a>
<a class="sourceLine" id="cb15-44" title="44"><span class="kw">setMethod</span>(<span class="dt">f=</span><span class="st">&#39;model.train&#39;</span>, <span class="co"># dont change this line</span></a>
<a class="sourceLine" id="cb15-45" title="45">    <span class="dt">signature=</span><span class="kw">c</span>(<span class="st">&#39;model_template&#39;</span>,<span class="st">&#39;dataset&#39;</span>),  <span class="co"># replace model_template with...</span></a>
<a class="sourceLine" id="cb15-46" title="46">                                              <span class="co"># ...your new model name</span></a>
<a class="sourceLine" id="cb15-47" title="47">    <span class="dt">definition =</span> <span class="cf">function</span>(M,D) {              <span class="co"># dont change this line</span></a>
<a class="sourceLine" id="cb15-48" title="48">        <span class="co"># do something here #</span></a>
<a class="sourceLine" id="cb15-49" title="49">        <span class="kw">return</span>(M)                             <span class="co"># make sure you return the model</span></a>
<a class="sourceLine" id="cb15-50" title="50">    }</a>
<a class="sourceLine" id="cb15-51" title="51">)</a>
<a class="sourceLine" id="cb15-52" title="52"></a>
<a class="sourceLine" id="cb15-53" title="53"><span class="co"># create a model.predict method for your object</span></a>
<a class="sourceLine" id="cb15-54" title="54"><span class="kw">setMethod</span>(<span class="dt">f=</span><span class="st">&#39;model.predict&#39;</span>,                  <span class="co"># dont change this line</span></a>
<a class="sourceLine" id="cb15-55" title="55">    <span class="dt">signature=</span><span class="kw">c</span>(<span class="st">&#39;model_template&#39;</span>,<span class="st">&#39;dataset&#39;</span>),  <span class="co"># replace model_template with...</span></a>
<a class="sourceLine" id="cb15-56" title="56">                                              <span class="co"># ...your new model name</span></a>
<a class="sourceLine" id="cb15-57" title="57">    <span class="dt">definition =</span> <span class="cf">function</span>(M,D) {              <span class="co"># dont change this line</span></a>
<a class="sourceLine" id="cb15-58" title="58">        <span class="co">## do something here ##</span></a>
<a class="sourceLine" id="cb15-59" title="59">        <span class="kw">return</span>(M)                             <span class="co"># make sure you return the model </span></a>
<a class="sourceLine" id="cb15-60" title="60">    }</a>
<a class="sourceLine" id="cb15-61" title="61">)</a></code></pre></div>
<hr />
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
